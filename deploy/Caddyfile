{
	email {$ACME_EMAIL}
}

# Local smoke-test endpoint (self-managed local CA cert).
localhost, 127.0.0.1 {
	encode zstd gzip
	tls internal
	reverse_proxy app:3000
}

# Public endpoint (Let's Encrypt via ACME HTTP challenge).
{$DOMAIN:fishbitecast.com} {
	encode zstd gzip
	reverse_proxy app:3000
	header {
		Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
		X-Content-Type-Options "nosniff"
		X-Frame-Options "DENY"
		Referrer-Policy "strict-origin-when-cross-origin"
	}
}
